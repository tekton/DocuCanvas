{% extends "polls/base.html" %}

{% block contextNav %}
{% endblock%}

{% block pageTitle %}
{{poll.name}}
{% endblock %}

{% block baseContent %}
<p>{{poll.context}}</p><br/>
<p>End Date: {{poll.end_date}}</p><br/>
<p>Votes Allowed Per Person: {{poll.max_votes}}</p><br/>
<form action="{% url 'polls.views.vote' poll.id %}" id="poll" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <table>
    <tr>
        <td></td>
        <td><b>Item</b></td>
        <td><b>Votes</b></td>
        <td></td>
    </tr>
    {% for item in items %}
    <tr>        
            <td>
                {% if sup %}
                    <input type="checkbox" id="item" name="{{item.id}}" value="Submit" >   
                {% else %}
                {% endif %}
            </td>
            <td>{{item.item}}</td>
            <td>{{item.votes}}</td>
            <td><input type='hidden' name='item' id='id_item' value='{{item.id}}'/></td>
        
    </tr>
    {% endfor %}
</table>
<input type="submit" name="submit" value="Submit"/>
</form>
{% endblock %}

{% block endScripts %}
<script type="text/javascript">
$("form").on("click", ":checkbox", function(event){
  $(":checkbox:not(:checked)", this.form).prop("disabled", function(){
    return $(this.form).find(":checkbox:checked").length == {{poll.max_votes}};
  });
});
</script>
{% endblock %}