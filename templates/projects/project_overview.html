{% extends "projects/base.html" %}

{% block pageTitle %}
Project
{% endblock %}

{% block contextNav %}
	<li class="nav-header">New</li>
	<li><a href="/issue/new/{{project_O.id}}">Issue</a></li>
	<li><a href="/issue/meta/new">Meta Issue</a></li>
	<li><a href="/issue/new/{{project_O.id}}">Risk</a></li>
	<li><a href="/checklist/new/{{project_O.id}}">Checklist</a></li>
	<li class="nav-header">Lists</li>
	<li><a href="/project/{{project_O.id}}/stats">Report</a></li>
	<li><a href="/checklist/project/{{project_O.id}}">Checklists</a></li>
	<li class="divider"></li>
	<li><a href="/project/{{project_O.id}}/edit">Edit Project</a></li>
{% endblock%}

{% block container %}
	<article class="row">
		<div id="project-column-main" class="span9 metainfo-maincolumn">
			<div id="project-details" class="well">
				<section class="media">
					<div class="media-body">
						<header>
							<h3 class="media-header">Scope</h3>
						</header>
						{{project_O.scope}}
					</div>
				</section>
				<section class="media">
					<div class="media-body">
						<header>
							<h3 class="media-header">Description</h3>
						</header>
						{{project_O.description}}
					</div>
				</section>
				<section class="media">
					<div class="media-body">
						<header>
							<h3 class="media-header">Business Case</h3>
						</header>
						{{project_O.business_case}}
					</div>
				</section>
			</div>

			<div id="project-issues" class="well">
				<section class="media">
					<div class="media-body">
						<header>
							<h3 class="media-header">Meta Issues</h3>
						</header>
						<table class="table">
							<thead>
						        <tr>
						            <th>Title</th>
						            <th>Type</th>
						            <th>Stats</th>
						        </tr>
						    </thead>
						    <tbody>
						        {% for meta in metas %}<tr>
						            <td><a href="/issue/meta/{{ meta.id }}/edit">{{ meta.title }}</a></td>
						            <td>{{ meta.mi_type }}</td>
						            <td><a href="/issue/meta/{{meta.id}}/stats">Stats</a></td>
						        </tr>{% empty %}<tr><td><em>No meta-issues for this project.</em></td></tr>
						        {% endfor %}
						    </tbody>
					    </table>
					</div>
				</section>

				<section class="media">
					<div class="media-body">
						<header>
							<h3 class="media-header">Issues</h3>
						</header>
						<table class="table">
							<caption>
								Incomplete
							</caption>
							<thead>
								<tr>
									<th>Summary</th>
									<th>Status</th>
									<th>Assigned To</th>
								</tr>
							</thead>
							<tbody>
							{% for issue in incomplete_issues%}
								<tr>
									<td><a href="{% url 'issues.views.issue_overview' issue.id %}" title="{{issue.description}}">{{issue.summary}}</a></td>
									<td>{{issue.status}}</td>
									<td>{{issue.assigned_to}}</td>
								</tr>
							{% endfor %}
							</tbody>
						</table>
						<table class="table">
							<caption>
								Completed
							</caption>
							<thead>
								<tr>
									<th>Summary</th>
									<th>Status</th>
									<th>Assigned To</th>
								</tr>
							</thead>
							<tbody>
							{% for issue in fixed_issues%}
								<tr>
									<td><a href="{% url 'issues.views.issue_overview' issue.id %}" title="{{issue.description}}">{{issue.summary}}</a></td>
									<td>{{issue.status}}</td>
									<td>{{issue.assigned_to}}</td>
								</tr>
							{% endfor %}
							</tbody>
						</table>
					</div>
				</section>
			</div>
		</div>

		<div id="project-column-aside" class="span3 metainfo-asidecolumn">
			<aside id="project-metainfo" class="well metainfo metainfo-show">
				<div class="pull-right">
					<button id="metainfo-toggle" class="btn btn-mini" type="button"><i class="icon-resize-small"></i></button>
				</div>
				<div id="project-metainfo-content" class="metainfo-content">
					<dl>
						<dt>Status:</dt>
							<dd>{{project_O.status}}</dd>
						<dt>Product Owner:</dt>
						{% if project_O.product_owner.id %}
							<dd><a href="/auth/user/{{project_O.product_owner.id}}">{{project_O.product_owner}}</a></dd>
						{% else %}
							<dd>{{project_O.product_owner}}</dd>
						{% endif %}
						<dt>Project Manager:</dt>
						{% if project_O.project_manager.id %}
							<dd><a href="/auth/user/{{project_O.product_manager.id}}">{{project_O.project_manager}}</a></dd>
						{% else %}
							<dd>{{project_O.project_manager}}</dd>
						{% endif %}	
						<dt>Lead Developer:</dt>
						{% if project_O.lead_developer.id %}
							<dd><a href="/auth/user/{{project_O.lead_developer.id}}">{{project_O.lead_developer}}</a></dd>
						{% else %}
							<dd>{{project_O.lead_developer}}</dd>
						{% endif %}
						<dt>Priority:</dt>
							<dd>{{project_O.priority}}</dd>
						<dt>Slug:</dt>
							<dd>{{project_O.slug}}</dd>
						<dt>Logo:</dt>
							<dd>{{project_O.logo}}</dd>
						<dt>Potential End Date:</dt>
							<dd>{{project_O.potential_end_date}}</dd>
						<dt>Current Phase:</dt>
							<dd>{{project_O.current_phase}}</dd>
						<dt>Phase Planning Start:</dt>
							<dd>{{project_O.phase_planning_start}}</dd>
						<dt>Phase Planning End:</dt>
							<dd>{{project_O.phase_planning_end}}</dd>
					</dl>
				</div>
			</aside>
		</div>
	</article>
{% endblock %}