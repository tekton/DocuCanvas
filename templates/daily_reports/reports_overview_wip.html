{% extends 'base.html' %}
{% load set_var %}

{% block additional_head %}
<style>
table{
	border: 1px solid #F2F2F2;
	box-shadow: 0 1px 4px #5A5A5A;
	width: 100%;
}
td{
	padding: 10px;
}
tr{
	padding: 10px;
}
.user{
	text-align: center;
	width: 20%;
}
.reportDiv{
	border: 1px solid #F2F2F2;
	box-shadow: 0 1px 4px #5A5A5A;
	padding: 10px;
	height: 300px;
	width: 80%;
	overflow: scroll;
	overflow-x: hidden;
}
.reportDate{
	background-color: #ddd;
	text-align: left;
}
div[class^='reportView']{
	padding: 5px;
	padding-left: 30px;
	margin-bottom:10px;
	width: 80%;
}
.dates{
	text-align: left;
}
</style>
{% endblock %}

{% block contextNav %}
<li><a href="/reports/edit">Daily Reports</a></li>
<li><a href="/reports/view">View Daily Reports</a></li>
{% if user.is_superuser%}
<li><a href="/reports/report_selection">Report Selection</a></li>
{% endif %}
{% endblock %}

{% block bodyContent %}
	<table class='userDiv'>
{% for user in users %}
{% set username = user %}

		<tr>
			<td class='user'>
		<!-- <div class='userName'> -->
		{{user}}
		<!-- </div> -->
			</td>
	<td>
		<div class = 'reportDiv'>
			{% for report in reports %}
				{% if username == report.user %}
				<div class='reportDate'>
					<a href='#' onClick='expandReport("reportView_{{user}}_{{forloop.counter}}")'>{{report.date}}</a>
					<b>Date Created:</b> {{report.created}}
					<b>Date Modified:</b> {{report.modified}}
				</div>
				<div class='reportView_{{user}}_{{forloop.counter}}' style='display: none'>
					{{report.description|safe}}<br />
				</div>
				{% endif %}
			{% endfor %}
		</div>
		<td>
		</tr>
{% endfor %}
	</table>
{% endblock %}
{% block endScripts %}
<script>
function expandReport(div){
	var divToExpand = "." + div;
	if($(divToExpand).css('display') == 'none'){
		$(divToExpand).css('display', 'inline-block');
	}else if($(divToExpand).css('display') == 'inline-block'){
		$(divToExpand).css('display', 'none');
	};

};
</script>
{% endblock %}